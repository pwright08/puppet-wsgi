# Filebeat configuration for <%= @name %> application.

filebeat.prospectors:
- input_type: log
  paths:
    - <%= @access_log %>
  document_type: lr-application
  fields:
    application: '<%= @name %>'
    environment: '<%= @environment %>'
    version:     '<%= @revision %>'
    <%- if @log_fields.size > 0 %><%- @log_fields.each do |value| %>    <%=value%>: '<%= scope.lookupvar('::' + value) %>'
    <%- end -%>
    <%- end -%>

- input_type: log
  paths:
  - <%= @application_log %>
  - <%= @error_log %>
  document_type: access
  fields:
    application: '<%= @name %>'
    environment: '<%= @environment %>'
    version:     '<%= @revision %>'
    <%- if @log_fields.size > 0 %><%- @log_fields.each do |value| %>    <%=value%>: '<%= scope.lookupvar('::' + value) %>'
    <%- end -%>
    <%- end -%>
